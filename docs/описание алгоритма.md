Предварительные расчеты:

- Загрузить маршрутный граф  N,E (длина ребра Le)
- Загрузить ледовые условия по неделям T1, T2 ... Tn
- Рассчитать интегральные ледовые условия для каждого ребра E на каждый момент времени T1, T2 ... Tn
- Определить функцию ice_condition(e,t) которая возвращает интегральные ледовые условия ребра в момент времени t
- Определить функцию расчета кратчайшего пути на графе N,E find_path(s,d,ts,v,k,v_ice,k_ice) -> t,p где t кратчайшее время, p кратчайший маршрут, s,d in N начало и конец маршрута, ts - время начала движения, v скорость судна, k - коэффициенты замедления судна,  v_ice - скорость ледокола, k_ice - коэффициенты замедления ледокола. Если v_ice,k_ice отсутствуют то рассчитывается самостоятельное движение, иначе движение в караване с одним судном. Если точка назначения d не указана рассчитываютcя t,p для всех достижимых вершин 
- Для каждого судна i in vessels (скорость судна Vi, коэффициенты замедления Ki, точка старта Si, точка финиша Di)
    - рассчитать время достижения из Si каждой вершины N без проводки self_move_cost(i,n), n in N
    - рассчитать время достижения конечной точки маршрута Di при условии полной проводки самым медленным ледоколом ice_move_cost(i,Di)


Вспомогательный алгоритм "Оценка суммарного времени проводки"
Вход: ледокол l,  суда для проводки v1,v2,v3 (v2 и v3 могут быть пустыми), точка начала проводки nf, точка конца проводки nl
вариации алгоритма - рассчитать время для конкретного стартового местонахождения ледокола или считать что ледокол прибыл на место проводки в последний момент
- Рассчитать возможное время прибытия каждого судна и ледокола до точки начала проводки nf (с учетом времени начала движения каждог осудна)
- время начала проводки Tf = max(возможное время прибытия) если указано место ледокола, то с учетом ожидания ледокола
- рассчитать время движения каравана до точки nl (с учетом самого медленного судна) Tl время окончания проводки
- рассчитать оптимальные маршруты для каждого судна до точки назначения
Суммарное время проводки = общее время нахождения всех судов на маршруте с учетом ожидания формирования каравана (без учета времени ледокола)

Вспомогательный алгоритм - поиск оптимальной точки формирования и расформирования каравана
вход суда для проводки v1,v2,v3


Грубая оценка решения:
- Для каждого судна i in vessels 
    - худшее время движения = self_move_cost(i,Di)
    - суб оптимальное время движения = ice_move_cost(i,Di)
    - оценка полезности проводки priority = self_move_cost(i,Di) - ice_move_cost(i,Di)

Взять очередное незапланированное судно v1 с наибольшей полезностью проводки
    Добавить к расчету суда Vr которые еще не помечены как запланированные  время начала движения которых в радиусе TR от выбранного и место старта в радиусе LR от выбранного
    Сформировать все комбинации судов (vi) in Vr, (vi,vj) in Vr для проводки
    установить точку начала проводки nf = точка старта судна v1
    установить точку конца проводки nl = точка назначения судна v1



    "waybill": [ // описание пути
            {"event":"move", // move - начало самостоятельного движения из точки, wait - начало ожидания, formation - движение в караване из точки, fin - прибытие в конечную точку,
             "point":11, //где произошло событие
             "time":"01.03.2022 00:00" //когда произошло событие
            }
            {"event":"wait", "point":16, "time":"01.03.2022 08:00"}
            {"event":"formation", "point":16, "time":"02.03.2022 08:00"}
            {"event":"formation", "point":15, "time":"03.03.2022 08:00"}
            {"event":"move", "point":18, "time":"03.03.2022 10:00"}
            {"event":"fin", "point":41, "time":"04.03.2022 10:00"}
        ]




Визуализация:

Нарисовать обстановку на время (т)

current_event = [0,1,0,0,0]

real_time = 1s
sim_time = 1h
for t = (start_t,fin_t,sim_time):
    найти все корабли которые пора рисовать
    for v in Vessels:
        v.waybill[current_event[v]] 
wait real_time




Время кадра реальное (1 секунды)
Время кадра в симуляции (1 час)

Цикл т от начала до конца
 т = т + шаг симуляции
Нарисовать обстановку на время (т)